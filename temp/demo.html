<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>弧形基线的水平卡片走马灯</title>
  <style>
    :root{
      --bg:#0b0c10;
      --fg:#e9eef7;
      --card-bg:#11151c;
      --accent:#7aa8ff;
      --card-w: clamp(220px, 26vw, 320px);
      --card-r: 22px;
      --gap: 40px;
      --arc-amplitude: 52px;     /* 弧形起伏幅度：越大越“弯” */
      --arc-period: 5.2;         /* 波长（越大越平缓） */
      --tilt: 8deg;              /* 沿弧线的轻微旋转幅度 */
      --hover-lift: 14px;
    }
    html,body{height:100%}
    body{
      margin:0; background:#0b0c10;
      color:var(--fg); font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      overflow:hidden; /* 我们自己处理滚动 */
      -webkit-font-smoothing:antialiased;
    }
    header{
      text-align:center; padding:32px 16px 8px;
    }
    h1{margin:0 0 8px;font-size:clamp(22px,3vw,36px);font-weight:800}
    p{margin:0;opacity:.7}

    /* 舞台与轨道 */
    .stage{
      position:relative;
      height: 72vh;
      max-height: 760px;
      overflow: hidden;
      mask: linear-gradient(90deg, rgba(0,0,0,0) 0%, #000 8%, #000 92%, rgba(0,0,0,0) 100%);
    }
    .rail{
      position:absolute; left:50%; top:50%;
      transform:translate3d(var(--tx, -50%), -50%, 0);
      display:flex; align-items:center; gap:var(--gap);
      will-change: transform;
    }

    /* 卡片 */
    .card{
      width:var(--card-w); aspect-ratio: 4/3; border-radius:var(--card-r);
      background: linear-gradient(180deg,#151a22,#0e1116);
      box-shadow: 0 10px 24px rgba(0,0,0,.45), 0 1px 0 rgba(255,255,255,.05) inset;
      overflow:hidden; color:#cfe0ff;
      transform-style:preserve-3d;
      transition: box-shadow .2s ease, filter .2s ease, transform .18s ease;
    }
    .card:hover{
      transform: translateY(calc(var(--lift,0px) - var(--hover-lift))) rotateX(6deg) rotateZ(var(--rz,0deg));
      box-shadow: 0 24px 46px rgba(0,0,0,.6), 0 0 0 1px rgba(122,168,255,.14) inset;
      z-index:2;
    }
    .media{height:64%; display:grid; place-items:center; background:linear-gradient(135deg,#7aa8ff22,#7aa8ff0a)}
    .media img{max-width:100%; max-height:100%; object-fit:cover; display:block}
    .label{height:36%; padding:12px 16px; display:grid; align-content:center}
    .title{font-weight:700}
    .meta{font-size:12px; opacity:.7}

    /* 渐隐提示条 */
    .fades::before,.fades::after{
      content:""; position:absolute; inset:0; pointer-events:none;
      background:
        linear-gradient(90deg, #0b0c10, transparent 140px),
        linear-gradient(270deg, #0b0c10, transparent 140px);
      mix-blend-mode:normal; opacity:.9;
    }

    /* 小提示 */
    .hint{
      position:absolute; left:50%; bottom:18px; transform:translateX(-50%);
      font-size:13px; opacity:.75; background:#11151c; padding:8px 12px; border-radius:999px; border:1px solid #202635;
    }

    @media (max-width: 680px){
      :root{ --gap: 22px; --arc-amplitude: 36px; }
      header{ padding:24px 12px 6px; }
      .stage{ height: 68vh; }
      .hint{font-size:12px}
    }
  </style>
</head>
<body>
  <header>
    <h1>Featured Creations</h1>
    <p>Handpicked best examples showcasing Nano Banana's capabilities</p>
  </header>

  <section class="stage fades" id="stage">
    <div class="rail" id="rail">
      <!-- 你可以把这些 img 换成你的图；数量任意 -->
      <!-- 我们将用 JS 给每张卡计算“弧形 y 偏移”和“跟随旋转角” -->
      <article class="card"><div class="media"><img src="https://picsum.photos/seed/a/800/600" alt="a"/></div><div class="label"><div class="title">Card A</div><div class="meta">sample</div></div></article>
      <article class="card"><div class="media"><img src="https://picsum.photos/seed/b/800/600" alt="b"/></div><div class="label"><div class="title">Card B</div><div class="meta">sample</div></div></article>
      <article class="card"><div class="media"><img src="https://picsum.photos/seed/c/800/600" alt="c"/></div><div class="label"><div class="title">Card C</div><div class="meta">sample</div></div></article>
      <article class="card"><div class="media"><img src="https://picsum.photos/seed/d/800/600" alt="d"/></div><div class="label"><div class="title">Card D</div><div class="meta">sample</div></div></article>
      <article class="card"><div class="media"><img src="https://picsum.photos/seed/e/800/600" alt="e"/></div><div class="label"><div class="title">Card E</div><div class="meta">sample</div></div></article>
      <article class="card"><div class="media"><img src="https://picsum.photos/seed/f/800/600" alt="f"/></div><div class="label"><div class="title">Card F</div><div class="meta">sample</div></div></article>
      <article class="card"><div class="media"><img src="https://picsum.photos/seed/g/800/600" alt="g"/></div><div class="label"><div class="title">Card G</div><div class="meta">sample</div></div></article>
      <article class="card"><div class="media"><img src="https://picsum.photos/seed/h/800/600" alt="h"/></div><div class="label"><div class="title">Card H</div><div class="meta">sample</div></div></article>
      <article class="card"><div class="media"><img src="https://picsum.photos/seed/i/800/600" alt="i"/></div><div class="label"><div class="title">Card I</div><div class="meta">sample</div></div></article>
    </div>
    <div class="hint">🖱️ 滚轮/拖拽横向浏览 · 📱 触摸滑动 · 🕒 无操作自动滚动</div>
  </section>

  <script>
    // ======== 参数 =========
    const autoplayPxPerSec = 40;      // 自动滚动速度
    const wheelSensitivity = 0.9;     // 鼠标滚轮灵敏度（越大越快）
    const damping = 0.92;             // 惯性衰减（0.9~0.97）
    const idleRestoreMs = 900;        // 用户交互后多久恢复自动滚动

    // ======== DOM =========
    const rail = document.getElementById('rail');
    const stage = document.getElementById('stage');
    const cards = [...rail.children];

    // 计算基础尺寸
    function cardFullWidth() {
      const c = cards[0];
      const style = getComputedStyle(c);
      const gap = parseFloat(getComputedStyle(rail).gap || 0);
      return c.getBoundingClientRect().width + gap;
    }

    // 生成弧形：纵向偏移 + 旋转角
    function applyArc() {
      const amp = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--arc-amplitude')) || 48;
      const period = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--arc-period')) || 5.2;
      const tiltMax = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--tilt')) || 8;

      cards.forEach((el, i) => {
        // i 基于居中对称的相对索引
        const n = i - (cards.length - 1) / 2;
        const y = Math.sin(n / period) * amp;
        const deg = Math.sin(n / period) * tiltMax; // 与 y 同步的轻微旋转
        el.style.setProperty('--lift', `${-y}px`);  // lift 为负向上
        el.style.setProperty('--rz', `${deg}deg`);
        // 初始静态变换（非 hover）
        el.style.transform = `translateY(${-y}px) rotateZ(${deg}deg)`;
      });
    }

    applyArc();
    window.addEventListener('resize', applyArc);

    // ======== 运动状态（位置/速度）========
    let x = 0;            // 当前轨道位移（px）
    let v = 0;            // 当前速度
    let last = performance.now();
    let idleTimer = null; // 恢复自动滚动计时
    let autoplay = true;  // 是否自动滚动

    // 让轨道无限循环视觉：当偏移超出阈值时重排
    function recycle() {
      const fw = cardFullWidth();
      const viewW = stage.clientWidth;
      // 左侧越界：把第一张挪到末尾
      while (x > fw) {
        x -= fw;
        rail.appendChild(rail.firstElementChild);
      }
      // 右侧越界：把最后一张挪到开头
      while (x < -(fw)) {
        x += fw;
        rail.prepend(rail.lastElementChild);
      }
      // 设定 transform
      rail.style.setProperty('--tx', `${-x - stage.clientWidth/2}px`);
      rail.style.transform = `translate3d(${(-x)}px, -50%, 0)`;
    }

    // 动画主循环
    function tick(now) {
      const dt = Math.max(0.001, (now - last) / 1000);
      last = now;

      if (autoplay) {
        x += autoplayPxPerSec * dt;
      } else {
        x += v * dt;
        v *= damping;
        if (Math.abs(v) < 0.05) v = 0;
      }

      recycle();
      requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);

    // ======== 交互：滚轮/拖拽/触摸 ========
    function pauseAutoplay() {
      autoplay = false;
      clearTimeout(idleTimer);
      idleTimer = setTimeout(() => { autoplay = true; }, idleRestoreMs);
    }

    // 滚轮 => 横向
    stage.addEventListener('wheel', (e) => {
      e.preventDefault(); // 禁止页面默认滚动
      const delta = (Math.abs(e.deltaX) > Math.abs(e.deltaY) ? e.deltaX : e.deltaY);
      v += delta * wheelSensitivity;
      pauseAutoplay();
    }, { passive: false });

    // 拖拽（指针统一）
    let dragging = false, lastX = 0;
    stage.addEventListener('pointerdown', (e) => {
      dragging = true; lastX = e.clientX; stage.setPointerCapture(e.pointerId); pauseAutoplay();
    });
    stage.addEventListener('pointermove', (e) => {
      if(!dragging) return;
      const dx = e.clientX - lastX; lastX = e.clientX;
      x -= dx; // 直接位移，速度用于惯性
      v = -dx * 8;
    });
    stage.addEventListener('pointerup', (e)=>{ dragging=false; stage.releasePointerCapture?.(e.pointerId); });
    stage.addEventListener('pointercancel', ()=> dragging=false);

    // 可选：尊重“减少动态”系统偏好
    const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
    if (mq.matches) {
      // 降级：关闭自动滚动与惯性
      autoplay = false;
      v = 0;
    }
  </script>
</body>
</html>
